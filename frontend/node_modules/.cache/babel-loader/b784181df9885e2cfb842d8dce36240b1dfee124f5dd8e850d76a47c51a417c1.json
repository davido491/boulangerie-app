{"ast":null,"code":"import React,{useState,useCallback}from'react';import axios from'axios';import'../styles/ProductForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductForm(_ref){let{onProductAdded}=_ref;const[name,setName]=useState('');const[price,setPrice]=useState('');const[stock,setStock]=useState('');const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const resetForm=useCallback(()=>{setName('');setPrice('');setStock('');setError('');},[]);const handleSubmit=useCallback(async e=>{e.preventDefault();setError('');setIsLoading(true);const trimmedName=name.trim();const parsedPrice=parseFloat(price);const parsedStock=parseInt(stock,10);if(!trimmedName||isNaN(parsedPrice)||isNaN(parsedStock)||parsedPrice<0||parsedStock<0){setError('Veuillez remplir tous les champs correctement. Le prix et le stock doivent être des nombres positifs.');setIsLoading(false);return;}const productData={name:trimmedName,price:parsedPrice,stock:parsedStock};console.log('Sending product data:',productData);// Log pour déboguer\ntry{const response=await axios.post('http://localhost:5000/products',productData);console.log('Server response:',response.data);// Log pour déboguer\nonProductAdded(response.data);resetForm();}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Error adding product:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error);setError(\"Erreur lors de l'ajout du produit: \".concat(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message));}finally{setIsLoading(false);}},[name,price,stock,onProductAdded,resetForm]);return/*#__PURE__*/_jsxs(\"form\",{className:\"product-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ajouter un Produit\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",value:name,onChange:e=>setName(e.target.value),required:true,className:name.trim()?'':'invalid'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Prix (\\u20AC)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"price\",type:\"number\",value:price,onChange:e=>setPrice(e.target.value),min:\"0\",step:\"0.01\",required:true,className:!isNaN(parseFloat(price))&&parseFloat(price)>=0?'':'invalid'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stock\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"input\",{id:\"stock\",type:\"number\",value:stock,onChange:e=>setStock(e.target.value),min:\"0\",required:true,className:!isNaN(parseInt(stock,10))&&parseInt(stock,10)>=0?'':'invalid'})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,children:isLoading?'Ajout en cours...':'Ajouter'})]});}export default ProductForm;","map":{"version":3,"names":["React","useState","useCallback","axios","jsx","_jsx","jsxs","_jsxs","ProductForm","_ref","onProductAdded","name","setName","price","setPrice","stock","setStock","error","setError","isLoading","setIsLoading","resetForm","handleSubmit","e","preventDefault","trimmedName","trim","parsedPrice","parseFloat","parsedStock","parseInt","isNaN","productData","console","log","response","post","data","_error$response","_error$response2","_error$response2$data","concat","message","className","onSubmit","children","htmlFor","id","type","value","onChange","target","required","min","step","disabled"],"sources":["C:/Users/sebas/boulangerie-app/frontend/src/components/ProductForm.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/ProductForm.css';\r\n\r\nfunction ProductForm({ onProductAdded }) {\r\n  const [name, setName] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [stock, setStock] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const resetForm = useCallback(() => {\r\n    setName('');\r\n    setPrice('');\r\n    setStock('');\r\n    setError('');\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    const trimmedName = name.trim();\r\n    const parsedPrice = parseFloat(price);\r\n    const parsedStock = parseInt(stock, 10);\r\n\r\n    if (!trimmedName || isNaN(parsedPrice) || isNaN(parsedStock) || parsedPrice < 0 || parsedStock < 0) {\r\n      setError('Veuillez remplir tous les champs correctement. Le prix et le stock doivent être des nombres positifs.');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const productData = {\r\n      name: trimmedName,\r\n      price: parsedPrice,\r\n      stock: parsedStock,\r\n    };\r\n\r\n    console.log('Sending product data:', productData); // Log pour déboguer\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/products', productData);\r\n      console.log('Server response:', response.data); // Log pour déboguer\r\n      onProductAdded(response.data);\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error('Error adding product:', error.response?.data || error);\r\n      setError(`Erreur lors de l'ajout du produit: ${error.response?.data?.message || error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [name, price, stock, onProductAdded, resetForm]);\r\n\r\n  return (\r\n    <form className=\"product-form\" onSubmit={handleSubmit}>\r\n      <h2>Ajouter un Produit</h2>\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"name\">Nom</label>\r\n        <input\r\n          id=\"name\"\r\n          type=\"text\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          required\r\n          className={name.trim() ? '' : 'invalid'}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"price\">Prix (€)</label>\r\n        <input\r\n          id=\"price\"\r\n          type=\"number\"\r\n          value={price}\r\n          onChange={(e) => setPrice(e.target.value)}\r\n          min=\"0\"\r\n          step=\"0.01\"\r\n          required\r\n          className={!isNaN(parseFloat(price)) && parseFloat(price) >= 0 ? '' : 'invalid'}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"stock\">Stock</label>\r\n        <input\r\n          id=\"stock\"\r\n          type=\"number\"\r\n          value={stock}\r\n          onChange={(e) => setStock(e.target.value)}\r\n          min=\"0\"\r\n          required\r\n          className={!isNaN(parseInt(stock, 10)) && parseInt(stock, 10) >= 0 ? '' : 'invalid'}\r\n        />\r\n      </div>\r\n      <button type=\"submit\" disabled={isLoading}>\r\n        {isLoading ? 'Ajout en cours...' : 'Ajouter'}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ProductForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}